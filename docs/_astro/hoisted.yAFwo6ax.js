window.dataLayer=window.dataLayer||[];function h(){dataLayer.push(arguments)}h("js",new Date);h("config","G-3WYVE621BL");function c(e){const t=document.getElementById(e);if(t){const s=t.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:s,behavior:"smooth"})}}window.scrollToSection=c;function y(){const e=document.getElementById("mobile-menu"),t=document.getElementById("menu-icon"),n=document.getElementById("close-icon");e&&t&&n&&(!e.classList.contains("hidden")?(e.classList.add("hidden"),t.classList.remove("hidden"),n.classList.add("hidden")):(e.classList.remove("hidden"),t.classList.add("hidden"),n.classList.remove("hidden")))}function p(){const e=document.getElementById("mobile-menu"),t=document.getElementById("menu-icon"),n=document.getElementById("close-icon");e&&t&&n&&(e.classList.add("hidden"),t.classList.remove("hidden"),n.classList.add("hidden"))}window.closeMobileMenu=p;document.getElementById("mobile-menu-toggle")?.addEventListener("click",y);window.scrollToSection=c;window.scrollToSection=c;function u(){const e=parseInt(document.getElementById("pages-slider")?.value||"5"),t=document.getElementById("cms-input")?.checked||!1,n=document.getElementById("ecommerce-input")?.checked||!1,o=document.getElementById("ai-input")?.checked||!1;let s=500;s+=e*150,t&&(s+=800),n&&(s+=1500),o&&(s+=1200);const i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(s),d=document.getElementById("total-display");d&&(d.textContent=i)}function r(e,t,n){const o=document.getElementById(e),s=document.getElementById(t),i=document.getElementById(n);o&&s&&i&&o.addEventListener("click",()=>{i.checked=!i.checked,i.checked?(o.classList.add("bg-kinetech-500","border-kinetech-500"),s.classList.remove("hidden")):(o.classList.remove("bg-kinetech-500","border-kinetech-500"),s.classList.add("hidden")),u()})}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("pages-slider"),t=document.getElementById("pages-display");e&&t&&e.addEventListener("input",()=>{t.textContent=e.value,u()}),r("cms-checkbox","cms-check","cms-input"),r("ecommerce-checkbox","ecommerce-check","ecommerce-input"),r("ai-checkbox","ai-check","ai-input"),u()});window.scrollToSection=c;window.scrollToSection=c;document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("contact-form"),t=document.getElementById("form-success"),n=document.getElementById("reset-form-btn");e&&e.addEventListener("submit",o=>{o.preventDefault(),setTimeout(()=>{t&&(t.classList.remove("hidden"),e.classList.add("hidden"),setTimeout(()=>{c("contact")},100))},800)}),n&&t&&e&&n.addEventListener("click",()=>{e.reset(),t.classList.add("hidden"),e.classList.remove("hidden")})});window.scrollToSection=c;let f=[{text:"Hello! I'm KineBot. How can I help you build your digital future today?",isUser:!1,time:new Date}],a=!1;function g(){const e=document.getElementById("chat-window"),t=document.getElementById("chat-icon"),n=document.getElementById("close-icon");e&&t&&n&&(!e.classList.contains("hidden")?(e.classList.add("hidden"),t.classList.remove("hidden"),n.classList.add("hidden")):(e.classList.remove("hidden"),t.classList.add("hidden"),n.classList.remove("hidden")))}function m(e,t){f.push({text:e,isUser:t,time:new Date}),l(),I()}function l(){const e=document.getElementById("messages-container");e&&(e.innerHTML=f.map(t=>{const n=t.isUser?"justify-end":"justify-start",o=t.isUser?"bg-kinetech-600 text-white":"bg-white text-slate-800",s=t.isUser?"rounded-br-none":"rounded-bl-none";return`
        <div class="flex ${n}">
          <div class="max-w-[85%] rounded-2xl ${s} px-4 py-3 text-sm shadow-sm ${o}">
            ${t.text}
          </div>
        </div>
      `}).join(""),a&&(e.innerHTML+=`
        <div class="flex justify-start">
          <div class="bg-white rounded-2xl rounded-bl-none px-4 py-3 shadow-sm border border-slate-100">
            <div class="flex space-x-1">
              <div class="w-2 h-2 bg-slate-400 rounded-full animate-bounce"></div>
              <div class="w-2 h-2 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
              <div class="w-2 h-2 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
            </div>
          </div>
        </div>
      `))}function I(){const e=document.getElementById("messages-container");e&&(e.scrollTop=e.scrollHeight)}async function v(e){if(!(!e.trim()||a)){m(e,!0),a=!0,l();try{const t="";if(!t)throw new Error("API key not configured. Please set PUBLIC_GEMINI_API_KEY in your .env file.");const n=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}],systemInstruction:{parts:[{text:`You are 'KineBot', the intelligent assistant for Kinetech. 
              Kinetech is a premier software development organization.
              
              Our Services:
              1. Web Development: Custom, responsive, high-performance sites.
              2. Cloud Solutions: Scalable AWS/Azure/GCP integration.
              3. AI Integration: We build custom AI models for business efficiency.
              
              Our Key Feature: "Build Your Site at Your Cost" - a flexible pricing model where clients choose features to match their budget.
              
              Tone: Professional, minimalistic, helpful, and concise. Do not write long paragraphs. Use bullet points if helpful.`}]}})});if(!n.ok)throw new Error(`API error: ${n.status}`);const s=(await n.json()).candidates?.[0]?.content?.parts?.[0]?.text||"I apologize, but I'm having trouble processing your request right now. Please try again later.";m(s,!1)}catch(t){console.error("Error generating AI response:",t);const n=t instanceof Error&&t.message.includes("API key")?"AI chat is not configured. Please set up your Gemini API key in the environment variables.":"I apologize, but I'm having trouble connecting to the Kinetech network right now. Please try again later.";m(n,!1)}finally{a=!1,l()}}}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("chat-toggle"),t=document.getElementById("close-chat"),n=document.getElementById("chat-form"),o=document.getElementById("chat-input"),s=document.getElementById("chat-submit");e&&e.addEventListener("click",g),t&&t.addEventListener("click",g),n&&o&&s&&(n.addEventListener("submit",async i=>{i.preventDefault();const d=o.value.trim();d&&(o.value="",s.disabled=!0,await v(d),s.disabled=!1)}),o.addEventListener("input",()=>{s&&(s.disabled=!o.value.trim()||a)})),l()});
